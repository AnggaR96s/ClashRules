mode: rule
allow-lan: true
unified-delay: true
bind-address: '*'
log-level: silent
ipv6: true
geodata-mode: true
external-controller: 0.0.0.0:9090
external-ui: dashboard/dist
tcp-concurrent: true
interface-name: ""
enable-process: true
geodata-loader: memconservative
inbound-tfo: false
secret: ""
profile:
  store-selected: true
  store-fake-ip: false
geox-url: {mmdb: "https://cdn.jsdelivr.net/gh/Dreamacro/maxmind-geoip@release/Country.mmdb", geoip: "https://github.com/v2fly/geoip/releases/latest/download/geoip-only-cn-private.dat", geosite: "https://github.com/taamarin/v2ray-rules-dat/raw/release/geosite.dat"}
tun:
  enable: false
  stack: gvisor
  dns-hijack:
    - any:53
  auto-route: true
  auto-detect-interface: true
sniffer:
  enable: true
  sniffing:
    - tls
    - http
  force-domain:
    - '+'
  skip-domain:
    - '+.google.com'
  port-whitelist:
    - 443
    - 80
dns:
  enable: true
  device: Meta
  ipv6: true
  prefer-h3: true #start DOH to use http/3 first
  default-nameserver:
    - 1.1.1.1
    - 94.140.14.14
  listen: 0.0.0.0:1053
  use-hosts: true
  enhanced-mode: redir-host
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.local"
    - "*.localhost"
    - "dns.*"
    - "dns.*.*"
    - "networktest.twilio.com"
    - "+.twilio.com"
  nameserver:
    - 9.9.9.9
    - 8.8.8.8
    - 149.112.112.112
  fallback:
    - 8.8.8.8
    - 1.1.1.1
  fallback-filter:
    geoip: false
    geoip-code: "ID"
    geosite: []
    ipcidr: []
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'
hosts:
  'ota.googlezip.net': 127.0.0.1
  'cacerts.digicert.com': 104.21.21.147
tproxy-port: 9898
proxies:
proxy-providers:
  ID:
    type: http
    path: "./confs/ID.yaml"
    url: "https://raw.githubusercontent.com/AnggaR96s/ClashRules/main/ID.yaml"
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 180
  SG:
    type: http
    path: "./confs/SG.yaml"
    url: "https://raw.githubusercontent.com/AnggaR96s/ClashRules/main/SG.yaml"
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 180
  SS:
    type: http
    path: "./confs/SS.yaml"
    url: "https://raw.githubusercontent.com/AnggaR96s/ClashRules/main/SS.yaml"
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 180
proxy-groups:
  - name: ğŸ—‚ï¸ Group
    type: select
    proxies:
      - ğŸ“Œ Select
      - â™»ï¸ Auto
      - ğŸ“Š Load Balance
      - ğŸ“± Sosmed
      - ğŸ® Gaming
      - ğŸï¸ Streaming
      - DIRECT
  - name: ğŸ“Œ Select
    type: select
    use:
      - ID
      - SG
      - SS
  - name: â™»ï¸ Auto
    type: url-test
    use:
      - ID
      - SG
      - SS
    url: 'http://captive.apple.com/generate_204'
    interval: 150
    tolerance: 30
    strategy: consistent-hashing
  - name: ğŸ“Š Load Balance
    type: load-balance
    use:
      - ID
      - SG
      - SS
    url: 'http://captive.apple.com/generate_204'
    interval: 150
    tolerance: 30
    strategy: consistent-hashing # consistent-hashing  or round-robin
  - name: ğŸ“± Sosmed
    type: select
    proxies:
      - ğŸ‡®ğŸ‡© Indonesia
      - ğŸ‡¸ğŸ‡¬ Singapore
  - name: ğŸ® Gaming
    type: select
    proxies:
      - ğŸ‡®ğŸ‡© Indonesia
      - ğŸ‡¸ğŸ‡¬ Singapore
  - name: ğŸï¸ Streaming
    type: select
    proxies:
      - ğŸ‡®ğŸ‡© Indonesia
      - ğŸ‡¸ğŸ‡¬ Singapore
  - name: ğŸ‡¸ğŸ‡¬ Singapore
    type: url-test
    use:
      - SG
    url: 'http://captive.apple.com/generate_204'
    interval: 150
    tolerance: 30
    strategy: consistent-hashing
  - name: ğŸ‡®ğŸ‡© Indonesia
    type: url-test
    use:
      - ID
    url: 'http://captive.apple.com/generate_204'
    interval: 150
    tolerance: 30
    strategy: consistent-hashing
rule-providers:
  â›” Adblock:
    type: http
    behavior: classical
    path: ./Adblock.yaml
    url: 'https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/AdvertisingTest/AdvertisingTest_Classical.yaml'
    interval: 86300
  â˜¢ï¸ Anti-Hijack:
    type: http
    behavior: classical
    path: ./Hijack.yaml
    url: 'https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Hijacking/Hijacking.yaml'
    interval: 86300
  ğŸ“± Sosmed:
    type: http
    behavior: classical
    path: ./sosmed.yaml
    url: 'https://raw.githubusercontent.com/AnggaR96s/ClashRules/main/sosmed.yaml'
    interval: 86300
  ğŸï¸ Streaming:
    type: http
    behavior: classical
    path: ./streaming.yaml
    url: 'https://raw.githubusercontent.com/AnggaR96s/ClashRules/main/streaming.yaml'
    interval: 86300
  ğŸ® Gaming:
    type: http
    behavior: classical
    path: ./gaming.yaml
    url: 'https://raw.githubusercontent.com/AnggaR96s/ClashRules/main/gaming.yaml'
    interval: 86300
  ğŸ¤– Telegram:
    type: http
    behavior: classical
    path: ./telegram.yaml
    url: 'https://raw.githubusercontent.com/AnggaR96s/ClashRules/main/telegram.yaml'
    interval: 86300
  ğŸš« Basic-ADS:
    type: http
    behavior: domain
    path: ./basicads.yaml
    url: 'https://raw.githubusercontent.com/malikshi/open_clash/main/rule_provider/rule_basicads.yaml'
    interval: 86300
  ğŸš« Personal-ADS:
    type: http
    behavior: classical
    path: ./personalads.yaml
    url: 'https://raw.githubusercontent.com/malikshi/open_clash/main/rule_provider/rule_personalads.yaml'
    interval: 86300
  ğŸ”’ Personal:
    type: http
    behavior: classical
    path: ./personal.yaml
    url: 'https://raw.githubusercontent.com/AnggaR96s/ClashRules/main/personal.yaml'
    interval: 86300
rules:
  - IN-TYPE,TUN,ğŸ—‚ï¸ Group
  - AND,((DOMAIN,xl.co.id),(NETWORK,UDP)),DIRECT
Â  - AND,((UID,10304),(NETWORK,UDP)),DIRECT
  - AND,((PROCESS-NAME,com.whatsapp),((NETWORK,UDP)),DIRECT
  - GEOSITE,category-ads-all,REJECT
  - IP-CIDR,127.0.0.1/32,REJECT,no-resolve
  - IP-CIDR6,::1/128,REJECT,no-resolve
  - RULE-SET,â›” Adblock,REJECT,no-resolve
  - RULE-SET,â˜¢ï¸ Anti-Hijack,REJECT,no-resolve
  - RULE-SET,ğŸ“± Sosmed,ğŸ“± Sosmed
  - RULE-SET,ğŸï¸ Streaming,ğŸï¸ Streaming
  - RULE-SET,ğŸ® Gaming,ğŸ® Gaming
  - RULE-SET,ğŸ¤– Telegram,ğŸ‡¸ğŸ‡¬ Singapore
  - RULE-SET,ğŸš« Basic-ADS,REJECT,no-resolve
  - RULE-SET,ğŸš« Personal-ADS,REJECT,no-resolve
  - RULE-SET,ğŸ”’ Personal,ğŸ‡®ğŸ‡© Indonesia
  - MATCH,ğŸ—‚ï¸ Group
